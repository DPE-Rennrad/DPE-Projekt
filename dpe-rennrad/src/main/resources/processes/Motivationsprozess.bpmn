<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_0393qe0" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.40.0" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.24.0">
  <bpmn:collaboration id="Collaboration_088szti">
    <bpmn:extensionElements />
    <bpmn:participant id="Participant_1nfmvcg" name="Kunde" />
    <bpmn:participant id="Participant_144yh94" name="Motivationsprozess" processRef="Process_1xbx5q5" />
    <bpmn:participant id="Participant_03947wf" name="KI" />
    <bpmn:messageFlow id="Flow_0p2xoj7" sourceRef="Participant_1nfmvcg" targetRef="Event_1i47jw0" />
    <bpmn:messageFlow id="Flow_0gpf3kq" sourceRef="Participant_03947wf" targetRef="Event_0jcqxj3" />
  </bpmn:collaboration>
  <bpmn:message id="Message_0k1ee9t" name="AntwortNachrichten" />
  <bpmn:message id="Message_1t8dtb3" name="ghjk" />
  <bpmn:message id="Message_2gil35l" name="Starttest" />
  <bpmn:message id="Message_0cljpk8" name="Messege_DataReceived" />
  <bpmn:process id="Process_1xbx5q5" isExecutable="true" camunda:historyTimeToLive="P1D">
    <bpmn:exclusiveGateway id="Gateway_03ymq4e">
      <bpmn:incoming>Flow_0io049m</bpmn:incoming>
      <bpmn:incoming>Flow_01knm6z</bpmn:incoming>
      <bpmn:outgoing>Flow_0z4tnk7</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_1tc3tuu" name="Ist Kunde verletzt oder krank?">
      <bpmn:incoming>Flow_0z4tnk7</bpmn:incoming>
      <bpmn:outgoing>Flow_091w5zp</bpmn:outgoing>
      <bpmn:outgoing>Flow_1r8rfu8</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:parallelGateway id="Gateway_1xamadm">
      <bpmn:incoming>Flow_091w5zp</bpmn:incoming>
      <bpmn:outgoing>Flow_1gkm7ay</bpmn:outgoing>
      <bpmn:outgoing>Flow_00970ur</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:serviceTask id="Activity_1pzfozf" name="motivierende Sprüche erstellen">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="url">http://host.docker.internal:8088/spruch</camunda:inputParameter>
            <camunda:inputParameter name="method">GET</camunda:inputParameter>
            <camunda:outputParameter name="spruch">${response}</camunda:outputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1gkm7ay</bpmn:incoming>
      <bpmn:outgoing>Flow_0o3k5ia</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:intermediateCatchEvent id="Event_0jcqxj3" name="Wetter Daten erhalten">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:outputParameter name="weatherInfo">${wetterAntwort}</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_13avxjc</bpmn:incoming>
      <bpmn:outgoing>Flow_0he6cpj</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_0nidce1" messageRef="Message_1im43rs" />
    </bpmn:intermediateCatchEvent>
    <bpmn:parallelGateway id="Gateway_0k3x4xn">
      <bpmn:incoming>Flow_0o3k5ia</bpmn:incoming>
      <bpmn:incoming>Flow_0he6cpj</bpmn:incoming>
      <bpmn:outgoing>Flow_0vwqxs1</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:intermediateCatchEvent id="Event_1i47jw0" name="Antwort von Kunde erhalten">
      <bpmn:incoming>Flow_1j903qy</bpmn:incoming>
      <bpmn:outgoing>Flow_01knm6z</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1up5sch" messageRef="Message_0k1ee9t" />
    </bpmn:intermediateCatchEvent>
    <bpmn:sendTask id="Activity_0metuxp" name="Wetter Daten von KI abfragen">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="url">http://host.docker.internal:8088/mock-inbox/KIWetterabfrage</camunda:inputParameter>
            <camunda:inputParameter name="method">POST</camunda:inputParameter>
            <camunda:inputParameter name="headers">
              <camunda:map>
                <camunda:entry key="Content-Type">application/json</camunda:entry>
              </camunda:map>
            </camunda:inputParameter>
            <camunda:inputParameter name="payload">
              <camunda:script scriptFormat="JavaScript">JSON.stringify({
  "message": "Erstelle einen kurzen Wetterbericht für die nächsten vier Stunden. Drücke diesen so positiv wie möglich aus."
});</camunda:script>
            </camunda:inputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_00970ur</bpmn:incoming>
      <bpmn:outgoing>Flow_13avxjc</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:sendTask id="Activity_0wlmabh" name="Kunde nach Krankheit oder Verletzung abfragen">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="url">http://host.docker.internal:8088/mock-inbox/verhinderungsabfrage</camunda:inputParameter>
            <camunda:inputParameter name="method">POST</camunda:inputParameter>
            <camunda:inputParameter name="headers">
              <camunda:map>
                <camunda:entry key="Content-Type">application/json</camunda:entry>
              </camunda:map>
            </camunda:inputParameter>
            <camunda:inputParameter name="payload">
              <camunda:script scriptFormat="JavaScript">JSON.stringify({
  "message": "Sind sie verletzt oder krank?"
});</camunda:script>
            </camunda:inputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_04grslc</bpmn:incoming>
      <bpmn:outgoing>Flow_1j903qy</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:exclusiveGateway id="Gateway_11499ta">
      <bpmn:incoming>Flow_1r8rfu8</bpmn:incoming>
      <bpmn:incoming>Flow_1rnepsl</bpmn:incoming>
      <bpmn:outgoing>Flow_15j0zh3</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="Event_1ihnanj" name="Kunde motiviert">
      <bpmn:incoming>Flow_15j0zh3</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sendTask id="Activity_04af9rs" name="motivierende Nachricht an Kunden versenden">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="url">http://host.docker.internal:8088/mock-inbox/motivationsergebnis</camunda:inputParameter>
            <camunda:inputParameter name="method">POST</camunda:inputParameter>
            <camunda:inputParameter name="headers">
              <camunda:map>
                <camunda:entry key="Content-Type">application/json</camunda:entry>
              </camunda:map>
            </camunda:inputParameter>
            <camunda:inputParameter name="payload">
              <camunda:script scriptFormat="JavaScript">JSON.stringify({
  message: "Hi, wir haben gesehen du warst fünf Tage nicht aktiv :( Komm jetzt zurück. " + execution.getVariable("weatherInfo") + " " + execution.getVariable("spruch") 
});</camunda:script>
            </camunda:inputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0vwqxs1</bpmn:incoming>
      <bpmn:outgoing>Flow_1rnepsl</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:startEvent id="Event_0xodff3">
      <bpmn:outgoing>Flow_04grslc</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:boundaryEvent id="Event_0a1wohf" name="1 Tag" attachedToRef="Activity_0wlmabh">
      <bpmn:outgoing>Flow_0io049m</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_1jn6aiv">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT24H</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_0io049m" sourceRef="Event_0a1wohf" targetRef="Gateway_03ymq4e" />
    <bpmn:sequenceFlow id="Flow_01knm6z" sourceRef="Event_1i47jw0" targetRef="Gateway_03ymq4e" />
    <bpmn:sequenceFlow id="Flow_0z4tnk7" sourceRef="Gateway_03ymq4e" targetRef="Gateway_1tc3tuu" />
    <bpmn:sequenceFlow id="Flow_091w5zp" sourceRef="Gateway_1tc3tuu" targetRef="Gateway_1xamadm">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1r8rfu8" name="Ja" sourceRef="Gateway_1tc3tuu" targetRef="Gateway_11499ta">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1gkm7ay" sourceRef="Gateway_1xamadm" targetRef="Activity_1pzfozf" />
    <bpmn:sequenceFlow id="Flow_00970ur" sourceRef="Gateway_1xamadm" targetRef="Activity_0metuxp" />
    <bpmn:sequenceFlow id="Flow_0o3k5ia" sourceRef="Activity_1pzfozf" targetRef="Gateway_0k3x4xn" />
    <bpmn:sequenceFlow id="Flow_13avxjc" sourceRef="Activity_0metuxp" targetRef="Event_0jcqxj3" />
    <bpmn:sequenceFlow id="Flow_0he6cpj" sourceRef="Event_0jcqxj3" targetRef="Gateway_0k3x4xn" />
    <bpmn:sequenceFlow id="Flow_0vwqxs1" sourceRef="Gateway_0k3x4xn" targetRef="Activity_04af9rs" />
    <bpmn:sequenceFlow id="Flow_1j903qy" sourceRef="Activity_0wlmabh" targetRef="Event_1i47jw0" />
    <bpmn:sequenceFlow id="Flow_04grslc" sourceRef="Event_0xodff3" targetRef="Activity_0wlmabh" />
    <bpmn:sequenceFlow id="Flow_1rnepsl" sourceRef="Activity_04af9rs" targetRef="Gateway_11499ta" />
    <bpmn:sequenceFlow id="Flow_15j0zh3" sourceRef="Gateway_11499ta" targetRef="Event_1ihnanj" />
  </bpmn:process>
  <bpmn:message id="Message_1im43rs" name="Wetter_Daten_erhalten" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_088szti">
      <bpmndi:BPMNShape id="Participant_0i26eqd_di" bpmnElement="Participant_1nfmvcg" isHorizontal="true">
        <dc:Bounds x="151" y="80" width="1997" height="60" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_144yh94_di" bpmnElement="Participant_144yh94" isHorizontal="true">
        <dc:Bounds x="151" y="190" width="2029" height="328" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_03ymq4e_di" bpmnElement="Gateway_03ymq4e" isMarkerVisible="true">
        <dc:Bounds x="655" y="295" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1tc3tuu_di" bpmnElement="Gateway_1tc3tuu" isMarkerVisible="true">
        <dc:Bounds x="815" y="295" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="797" y="352" width="86" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_06ltb27_di" bpmnElement="Gateway_1xamadm">
        <dc:Bounds x="975" y="295" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_19g1mop_di" bpmnElement="Activity_1pzfozf">
        <dc:Bounds x="1140" y="280" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_086vb8z_di" bpmnElement="Event_0jcqxj3">
        <dc:Bounds x="1362" y="412" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1348" y="375" width="65" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_06wapb4_di" bpmnElement="Gateway_0k3x4xn">
        <dc:Bounds x="1465" y="295" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1uox4yn_di" bpmnElement="Event_1i47jw0">
        <dc:Bounds x="542" y="302" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="523" y="345" width="75" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0fhuy19" bpmnElement="Activity_0metuxp">
        <dc:Bounds x="1140" y="390" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_04oxa9q" bpmnElement="Activity_0wlmabh">
        <dc:Bounds x="357" y="280" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_11499ta_di" bpmnElement="Gateway_11499ta" isMarkerVisible="true">
        <dc:Bounds x="1855" y="295" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1ihnanj_di" bpmnElement="Event_1ihnanj">
        <dc:Bounds x="1982" y="302" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1961" y="345" width="78" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1stva1d" bpmnElement="Activity_04af9rs">
        <dc:Bounds x="1640" y="280" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0tp4wv4_di" bpmnElement="Event_0xodff3">
        <dc:Bounds x="232" y="302" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_14fem8m_di" bpmnElement="Event_0a1wohf">
        <dc:Bounds x="439" y="342" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="423" y="383" width="27" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0io049m_di" bpmnElement="Flow_0io049m">
        <di:waypoint x="457" y="378" />
        <di:waypoint x="457" y="400" />
        <di:waypoint x="680" y="400" />
        <di:waypoint x="680" y="345" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_01knm6z_di" bpmnElement="Flow_01knm6z">
        <di:waypoint x="578" y="320" />
        <di:waypoint x="655" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0z4tnk7_di" bpmnElement="Flow_0z4tnk7">
        <di:waypoint x="705" y="320" />
        <di:waypoint x="815" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_091w5zp_di" bpmnElement="Flow_091w5zp">
        <di:waypoint x="865" y="320" />
        <di:waypoint x="975" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1r8rfu8_di" bpmnElement="Flow_1r8rfu8">
        <di:waypoint x="840" y="295" />
        <di:waypoint x="840" y="220" />
        <di:waypoint x="1880" y="220" />
        <di:waypoint x="1880" y="295" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1354" y="202" width="12" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1gkm7ay_di" bpmnElement="Flow_1gkm7ay">
        <di:waypoint x="1025" y="320" />
        <di:waypoint x="1140" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_00970ur_di" bpmnElement="Flow_00970ur">
        <di:waypoint x="1000" y="345" />
        <di:waypoint x="1000" y="430" />
        <di:waypoint x="1140" y="430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0o3k5ia_di" bpmnElement="Flow_0o3k5ia">
        <di:waypoint x="1240" y="320" />
        <di:waypoint x="1465" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_13avxjc_di" bpmnElement="Flow_13avxjc">
        <di:waypoint x="1240" y="430" />
        <di:waypoint x="1362" y="430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0he6cpj_di" bpmnElement="Flow_0he6cpj">
        <di:waypoint x="1398" y="430" />
        <di:waypoint x="1490" y="430" />
        <di:waypoint x="1490" y="345" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_15j0zh3_di" bpmnElement="Flow_15j0zh3">
        <di:waypoint x="1905" y="320" />
        <di:waypoint x="1982" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1rnepsl_di" bpmnElement="Flow_1rnepsl">
        <di:waypoint x="1740" y="320" />
        <di:waypoint x="1855" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04grslc_di" bpmnElement="Flow_04grslc">
        <di:waypoint x="268" y="320" />
        <di:waypoint x="357" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1j903qy_di" bpmnElement="Flow_1j903qy">
        <di:waypoint x="457" y="320" />
        <di:waypoint x="542" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0vwqxs1_di" bpmnElement="Flow_0vwqxs1">
        <di:waypoint x="1515" y="320" />
        <di:waypoint x="1640" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="BPMNShape_0d0h2jb" bpmnElement="Participant_03947wf" isHorizontal="true">
        <dc:Bounds x="151" y="550" width="1997" height="60" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0p2xoj7_di" bpmnElement="Flow_0p2xoj7">
        <di:waypoint x="560" y="140" />
        <di:waypoint x="560" y="302" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0gpf3kq_di" bpmnElement="Flow_0gpf3kq">
        <di:waypoint x="1380" y="550" />
        <di:waypoint x="1380" y="448" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
